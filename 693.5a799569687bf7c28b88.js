"use strict";(self.webpackChunkcurrency_rates_conversion_history=self.webpackChunkcurrency_rates_conversion_history||[]).push([[693],{9693:(e,r,n)=>{n.r(r),n.d(r,{default:()=>A});var t=n(5893),o=n(4611),a=n(9704),i=n(7294),s=function(e){var r=e.children,n=e.reducers,o=e.removeAfterUnmount,s=(0,a.oR)(),l=(0,a.I0)();return(0,i.useEffect)((function(){return Object.entries(n).forEach((function(e){var r=e[0],n=e[1];s.reducerManager.add(r,n),l({type:"@INIT ".concat(r," reducer")})})),function(){o&&Object.entries(n).forEach((function(e){var r=e[0];s.reducerManager.remove(r),l({type:"@DESTROY ".concat(r," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:r})},l=n(6300),c=n(2853),u=n(6068),d=n(9333),f=n(1647),p=n(6257),v=function(e){var r;return(null===(r=null==e?void 0:e.loginForm)||void 0===r?void 0:r.login)||""},h=function(e){var r;return(null===(r=null==e?void 0:e.loginForm)||void 0===r?void 0:r.password)||""},x=function(e){var r;return(null===(r=null==e?void 0:e.loginForm)||void 0===r?void 0:r.isLoading)||!1},g=function(e){var r;return null===(r=null==e?void 0:e.loginForm)||void 0===r?void 0:r.error},m=n(7168),y=n(9669),b=n.n(y),w=n(3372),j=n(1480),k=n(7663),C=(0,m.hg)("login/loginByResponse",(function(e,r){return n=void 0,t=void 0,a=function(){var n,t;return function(e,r){var n,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,t&&(o=2&s[0]?t.return:s[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,s[1])).done)return o;switch(t=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,t=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=r.call(e,i)}catch(e){s=[6,e],t=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,b().post("https://test-front-spa.mmtestprojectsfactory.com/api/",e)];case 1:if(n=o.sent(),console.log(n),!n.data)throw new Error;return n.data.result===j.$.ERROR?[2,r.rejectWithValue(n.data.error)]:(n.data.result===j.$.OK&&(localStorage.setItem(k.z,JSON.stringify(n.data)),r.dispatch(w.hI.setAuthData(n.data))),[2,n.data]);case 2:return t=o.sent(),console.log(t),[2,r.rejectWithValue("error")];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,r){function i(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(r){var n;r.done?e(r.value):(n=r.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,s)}l((a=a.apply(n,t||[])).next())}));var n,t,o,a})),O=/^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,30}$/,S=/(?=(.*[0-9]))(?=.*[_])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{7,}$/,z=(0,m.oM)({name:"login",initialState:{login:"",password:"",isLoading:!1},reducers:{setUsername:function(e,r){e.login=r.payload,e.error=void 0,e.login.length>=5&&!e.login.match(O)&&(e.error="Некорректный формат адреса электронной почты")},setPassword:function(e,r){e.password=r.payload,e.error=void 0,e.password.length>=7&&!e.password.match(S)&&(e.error='Не менее 7 символов, содержащих латинские буквы верхнего и нижнего регистра и цифры, без спец. символов, кроме "_"')}},extraReducers:function(e){e.addCase(C.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(C.fulfilled,(function(e){e.isLoading=!1})).addCase(C.rejected,(function(e,r){e.isLoading=!1,e.error=r.payload}))}}),Z=z.actions,E=z.reducer;var I=function(){return I=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},I.apply(this,arguments)},R={loginForm:E};const A=(0,i.memo)((function(e){var r=e.className,n=(0,a.I0)(),m=(0,a.v9)(v),y=(0,a.v9)(h),b=(0,a.v9)(x),w=(0,a.v9)(g),j=(0,i.useCallback)((function(e){n(Z.setUsername(e.target.value))}),[n]),k=(0,i.useCallback)((function(e){n(Z.setPassword(e.target.value))}),[n]),O=(0,i.useCallback)((function(){n(C({action:"login",login:m,password:y}))}),[n,m,y]);return(0,t.jsx)(s,I({removeAfterUnmount:!0,reducers:R},{children:(0,t.jsxs)("div",I({className:(0,o.A)("xYNEfcE9",{},[r])},{children:[(0,t.jsxs)("div",I({className:"gC6fxt43"},{children:[(0,t.jsxs)(l.Z,I({sx:{mb:"15px"},variant:"outlined"},{children:[(0,t.jsx)(c.Z,I({sx:{fontSize:"14px",color:"#000000",mb:"2px"}},{children:"Логин"})),(0,t.jsx)(u.Z,{value:m,onChange:j,placeholder:"user@mail.ru",type:"email",error:!!w,sx:{borderRadius:"5px",fontSize:"16px","& .MuiOutlinedInput-input":{p:"10px"}}})]})),(0,t.jsxs)(l.Z,I({variant:"outlined"},{children:[(0,t.jsx)(c.Z,I({sx:{fontSize:"14px",color:"#000000",mb:"2px"}},{children:"Пароль"})),(0,t.jsx)(u.Z,{value:y,onChange:k,error:!!w,placeholder:"*********",type:"password",sx:{borderRadius:"5px",fontSize:"16px","& .MuiOutlinedInput-input":{p:"10px"}}})]}))]})),(0,t.jsxs)(d.Z,I({color:"primary",variant:"contained",sx:{mt:"50px","& span":{ml:"6px"}},disabled:b,onClick:O},{children:["Вход"," ",(0,t.jsx)("span",{children:(0,t.jsx)(p.Z,{})})]})),(0,t.jsx)("div",I({className:"XHWyjIWc"},{children:w&&(0,t.jsx)(f.Z,I({sx:{fontSize:"10px",color:"#D32F2F"}},{children:w}))}))]}))}))}))}}]);