"use strict";(self.webpackChunkcurrency_rates_conversion_history=self.webpackChunkcurrency_rates_conversion_history||[]).push([[201],{5201:(e,n,r)=>{r.r(n),r.d(n,{default:()=>I});var t=r(5893),o=r(4611),a=r(9704),i=r(7294),l=r(1150),s=r(6300),c=r(2853),u=r(8900),d=r(5305),f=r(1647),p=r(6257),h=r(5461),v=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.login)||""},x=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.password)||""},y=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.isLoading)||!1},g=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},b=r(7168),m=r(9669),w=r.n(m),j=r(3372),k=r(1480),S=r(7663),C=(0,b.hg)("login/loginByResponse",(function(e,n){var r,t,o,a,i=e.login,l=e.password;return r=void 0,t=void 0,a=function(){var e,r;return function(e,n){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&l[0]?t.return:l[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,l[1])).done)return o;switch(t=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,t=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],t=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,w().post("https://test-front-spa.mmtestprojectsfactory.com/api/",{action:"login",login:i,password:l})];case 1:if(e=t.sent(),console.log(e),!e.data)throw new Error;return e.data.result===k.$.ERROR?[2,n.rejectWithValue(e.data.error||"")]:(e.data.result===k.$.OK&&(localStorage.setItem(S.z,JSON.stringify(e.data)),n.dispatch(j.hI.setAuthData(e.data))),[2,e.data]);case 2:return r=t.sent(),console.log(r),[2,n.rejectWithValue("error")];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{s(a.next(e))}catch(e){n(e)}}function l(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,l)}s((a=a.apply(r,t||[])).next())}))})),z=/^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,30}$/,O=/(?=(.*[0-9]))(?=.*[_])(?=.*[a-z])(?=(.*[A-Z]))(?=(.*)).{7,}$/,E=(0,b.oM)({name:"login",initialState:{login:"",password:"",isLoading:!1},reducers:{setUsername:function(e,n){e.login=n.payload,e.error=void 0,e.login.length>=5&&!e.login.match(z)&&(e.error="Некорректный формат адреса электронной почты")},setPassword:function(e,n){e.password=n.payload,e.error=void 0,e.password.length>=7&&!e.password.match(O)&&(e.error='Не менее 7 символов, содержащих латинские буквы верхнего и нижнего регистра и цифры, без спец. символов, кроме "_"')}},extraReducers:function(e){e.addCase(C.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(C.fulfilled,(function(e){e.isLoading=!1})).addCase(C.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),Z=E.actions,R=E.reducer;var A=function(){return A=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},A.apply(this,arguments)},F={loginForm:R};const I=(0,i.memo)((function(e){var n=e.className,r=e.onSuccess,b=(0,h.T)(),m=(0,a.v9)(v),w=(0,a.v9)(x),j=(0,a.v9)(y),k=(0,a.v9)(g),S=(0,i.useCallback)((function(e){b(Z.setUsername(e.target.value))}),[b]),z=(0,i.useCallback)((function(e){b(Z.setPassword(e.target.value))}),[b]),O=(0,i.useCallback)((function(){return e=void 0,n=void 0,o=function(){return function(e,n){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&l[0]?t.return:l[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,l[1])).done)return o;switch(t=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,t=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],t=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(e){switch(e.label){case 0:return[4,b(C({login:m,password:w}))];case 1:return"fulfilled"===e.sent().meta.requestStatus&&r(),[2]}}))},new((t=void 0)||(t=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,l)}s((o=o.apply(e,n||[])).next())}));var e,n,t,o}),[r,b,m,w]);return(0,t.jsx)(l.W,A({removeAfterUnmount:!0,reducers:F},{children:(0,t.jsxs)("div",A({className:(0,o.A)("xYNEfcE9",{},[n])},{children:[(0,t.jsxs)("div",A({className:"gC6fxt43"},{children:[(0,t.jsxs)(s.Z,A({sx:{mb:"15px"},variant:"outlined"},{children:[(0,t.jsx)(c.Z,A({sx:{fontSize:"14px",color:"#000000",mb:"2px"}},{children:"Логин"})),(0,t.jsx)(u.Z,{value:m,onChange:S,placeholder:"user@mail.ru",type:"email",error:!!k,sx:{borderRadius:"5px",fontSize:"16px","& .MuiOutlinedInput-input":{p:"10px"}}})]})),(0,t.jsxs)(s.Z,A({variant:"outlined"},{children:[(0,t.jsx)(c.Z,A({sx:{fontSize:"14px",color:"#000000",mb:"2px"}},{children:"Пароль"})),(0,t.jsx)(u.Z,{value:w,onChange:z,error:!!k,placeholder:"*********",type:"password",sx:{borderRadius:"5px",fontSize:"16px","& .MuiOutlinedInput-input":{p:"10px"}}})]}))]})),(0,t.jsxs)(d.Z,A({color:"primary",variant:"contained",sx:{mt:"50px","& span":{ml:"6px"}},disabled:j,onClick:O},{children:["Вход"," ",(0,t.jsx)("span",{children:(0,t.jsx)(p.Z,{})})]})),(0,t.jsx)("div",A({className:"PzrMeHXM"},{children:k&&(0,t.jsx)(f.Z,A({sx:{fontSize:"12px",color:"#D32F2F"}},{children:k}))}))]}))}))}))},1150:(e,n,r)=>{r.d(n,{W:()=>i});var t=r(5893),o=r(7294),a=r(9704),i=function(e){var n=e.children,r=e.reducers,i=e.removeAfterUnmount,l=(0,a.oR)(),s=(0,a.I0)();return(0,o.useEffect)((function(){return Object.entries(r).forEach((function(e){var n=e[0],r=e[1];l.reducerManager.add(n,r),s({type:"@INIT ".concat(n," reducer")})})),function(){i&&Object.entries(r).forEach((function(e){var n=e[0];l.reducerManager.remove(n),s({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:n})}},5461:(e,n,r)=>{r.d(n,{T:()=>t});var t=r(9704).I0}}]);